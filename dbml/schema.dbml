//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Project "reserve-me" {
  database_type: 'PostgreSQL'
  Note: 'Test pro ject description'
}

Table MeetingSchedule {
  id Int [pk, increment]
  meetingId Int [not null]
  meeting Meeting [not null]
  locationId Int [not null]
  location Location [not null]
  startDate DateTime [not null]
  endDate DateTime [not null]
  canceled Boolean [not null, default: false]
  cancellationReason String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Table Client {
  id Int [pk, increment]
  phoneNumber String [not null]
  firstName String
  lastName String
  clientsOnMeetings ClientsOnMeetings [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Table ClientsOnMeetings {
  clientId Int [not null]
  meetingId Int [not null]
  client Client [not null]
  meeting Meeting [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]

  indexes {
    (clientId, meetingId) [pk]
  }
}

Table Employee {
  id Int [pk, increment]
  firstName String [not null]
  lastName String [not null]
  schedule EmployeeSchedule [not null]
  meeting Meeting [not null]
}

Table EmployeeSchedule {
  id Int [pk, increment]
  employeeId Int [not null]
  locationId Int [not null]
  startDate DateTime [not null]
  endDate DateTime [not null]
  canceled Boolean [not null, default: false]
  cancellationReason String
  repeatRate String
  employee Employee [not null]
  location Location [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Table Location {
  id Int [pk, increment]
  name String [not null]
  street String [not null]
  houseNumber Int [not null]
  city String [not null]
  postalCode String [not null]
  employeeSchedules EmployeeSchedule [not null]
  meetingSchedules MeetingSchedule [not null]
}

Table Service {
  id Int [pk, increment]
  name String [not null]
  price Decimal [not null]
  servicesBookedOnMeetings ServicesBookedOnMeetings [not null]
  servicesProvidedOnMeetings ServicesProvidedOnMeetings [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Table ServicesProvidedOnMeetings {
  clientId Int [not null]
  meetingId Int [not null]
  service Service [not null]
  meeting Meeting [not null]

  indexes {
    (clientId, meetingId) [pk]
  }
}

Table ServicesBookedOnMeetings {
  serviceId Int [not null]
  meetingId Int [not null]
  meeting Meeting [not null]
  service Service [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]

  indexes {
    (serviceId, meetingId) [pk]
  }
}

Table Meeting {
  id Int [pk, increment]
  employeeId Int
  priceExcepted Decimal [not null]
  priceFull Decimal
  discount Decimal [not null, default: 0]
  priceFinal Decimal
  employeeIdCreated Int
  repeatRate String
  clientsOnMeetings ClientsOnMeetings [not null]
  employee Employee
  schedules MeetingSchedule [not null]
  servicesBookedOnMeetings ServicesBookedOnMeetings [not null]
  servicesProvidedOnMeetings ServicesProvidedOnMeetings [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Ref: MeetingSchedule.meetingId > Meeting.id [delete: Cascade]

Ref: MeetingSchedule.locationId > Location.id

Ref: ClientsOnMeetings.clientId > Client.id

Ref: ClientsOnMeetings.meetingId > Meeting.id [delete: Cascade]

Ref: EmployeeSchedule.employeeId > Employee.id

Ref: EmployeeSchedule.locationId > Location.id

Ref: ServicesProvidedOnMeetings.clientId > Service.id

Ref: ServicesProvidedOnMeetings.meetingId > Meeting.id [delete: Cascade]

Ref: ServicesBookedOnMeetings.meetingId > Meeting.id [delete: Cascade]

Ref: ServicesBookedOnMeetings.serviceId > Service.id

Ref: Meeting.employeeId > Employee.id