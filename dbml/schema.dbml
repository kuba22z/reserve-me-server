//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Project "reserve-me" {
  database_type: 'PostgreSQL'
  Note: 'Test pro ject description'
}

Table Meeting {
  id Int [pk, increment]
  employeeId Int [not null]
  scheduleId Int [unique, not null]
  priceExcepted Decimal [not null]
  priceFull Decimal
  discount Decimal [not null, default: 0]
  priceFinal Decimal
  canceled Boolean [not null, default: false]
  cancellationReason String [not null, default: '']
  employeeIdCreated Int
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  clientsOnMeetings ClientsOnMeetings [not null]
  employee Employee [not null]
  schedule MeetingSchedule [not null]
  serivcesBookedOnMeetings ServicesBookedOnMeetings [not null]
  serivcesProvidedOnMeetings ServicesProvidedOnMeetings [not null]
}

Table MeetingSchedule {
  id Int [pk, increment]
  locationId Int [not null]
  startTime DateTime [not null]
  endTime DateTime [not null]
  startDate DateTime [not null]
  endDate DateTime [default: `now()`, not null]
  repeatRate Int [not null, default: 0]
  repeatRateUnit RepeatRateUnit [not null, default: 'DAY']
  location Location [not null]
  meeting Meeting
}

Table Client {
  id Int [pk, increment]
  phoneNumber String [not null]
  firstName String
  lastName String
  clientsOnMeetings ClientsOnMeetings [not null]
}

Table ClientsOnMeetings {
  clientId Int [not null]
  meetingId Int [not null]
  assignedAt DateTime [default: `now()`, not null]
  client Client [not null]
  meeting Meeting [not null]

  indexes {
    (clientId, meetingId) [pk]
  }
}

Table Employee {
  id Int [pk, increment]
  firstName String [not null]
  lastName String [not null]
  schedule EmployeeSchedule [not null]
  meetings Meeting [not null]
}

Table EmployeeSchedule {
  id Int [pk, increment]
  employeeId Int [not null]
  locationId Int [not null]
  startTime DateTime [not null]
  endTime DateTime [not null]
  startDate DateTime [not null]
  endDate DateTime [default: `now()`, not null]
  repeatRate Int [not null, default: 0]
  repeatRateUnit RepeatRateUnit [not null, default: 'DAY']
  employee Employee [not null]
  location Location [not null]
}

Table Location {
  id Int [pk, increment]
  name String [not null]
  street String [not null]
  houseNumber Int [not null]
  city String [not null]
  postalCode String [not null]
  employeeSchedules EmployeeSchedule [not null]
  meetingSchedule MeetingSchedule [not null]
}

Table Service {
  id Int [pk, increment]
  name String [not null]
  price Decimal [not null]
  servicesBookedOnMeetings ServicesBookedOnMeetings [not null]
  servicesProvidedOnMeetings ServicesProvidedOnMeetings [not null]
}

Table ServicesProvidedOnMeetings {
  clientId Int [not null]
  meetingId Int [not null]
  assignedAt DateTime [default: `now()`, not null]
  serivce Service [not null]
  meeting Meeting [not null]

  indexes {
    (clientId, meetingId) [pk]
  }
}

Table ServicesBookedOnMeetings {
  serivceId Int [not null]
  meetingId Int [not null]
  assignedAt DateTime [default: `now()`, not null]
  meeting Meeting [not null]
  serivce Service [not null]

  indexes {
    (serivceId, meetingId) [pk]
  }
}

Enum RepeatRateUnit {
  DAY
  WEEK
  MONTH
  YEAR
}

Ref: Meeting.employeeId > Employee.id

Ref: Meeting.scheduleId - MeetingSchedule.id

Ref: MeetingSchedule.locationId > Location.id

Ref: ClientsOnMeetings.clientId > Client.id

Ref: ClientsOnMeetings.meetingId > Meeting.id

Ref: EmployeeSchedule.employeeId > Employee.id

Ref: EmployeeSchedule.locationId > Location.id

Ref: ServicesProvidedOnMeetings.clientId > Service.id

Ref: ServicesProvidedOnMeetings.meetingId > Meeting.id

Ref: ServicesBookedOnMeetings.meetingId > Meeting.id

Ref: ServicesBookedOnMeetings.serivceId > Service.id